{"version":3,"sources":["ativos.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ativos.js","sourcesContent":["function handleData(data) {\n\n\n    $('#resultOfSearch').empty();\n    if (data.data.length > 0) {\n        $.each(data.data, function (i, item) {\n            var Emprestimo = '';\n            var connection = '';\n            var state = '';\n            var keys = '';\n            var Assoc = '';\n            var Empres = '';\n            if (item.connect != null) {\n                connection = \"<button type=\\\"button\\\" class=\\\"close glyphicon glyphicon-file termos-modal\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\" data-toggle=\\\"tooltip\\\" data-placement=\\\"left\\\" title=\\\"Tooltip on left\\\"><span aria-hidden=\\\"true\\\"></span></button>\"\n                    + \"<p><b>Colaborador:</b>\" + item.connect[0].value + \" <b>Matrícula:</b>  \" + item.connect[0].id + \"  <b>Situação:</b> \" + item.connect[0].DESSIT + \"</p>\"\n                    + \"<div style='display: none'><span class='assoc-numemp'>\" + item.connect[0].NUMEMP + \"</span><span class='assoc-sitafa'>\" + item.connect[0].SITAFA + \"</span><span class='assoc-tipcol'>\" + item.connect[0].TIPCOL + \"</span><span class='assoc-id'>\" + item.connect[0].id + \"</span> </div> \";\n            }\n            var History = null;\n            if (item.history.length > 0) {\n                History = \"<div class=\\\"panel-group\\\" id=\\\"accordion\\\" role=\\\"tablist\\\" aria-multiselectable=\\\"true\\\">\";\n                $.each(item.history, function (i, his) {\n                    row = \"<div class='panel panel-default'>\" +\n                        \"<div class='panel-heading' role='tab' id='headin\" + his.id + \"'>\" +\n                        \"<h4 class=\\\"panel-title\\\">\" +\n                        \"<a role='button' data-toggle='collapse'  href='#\" + his.id + \"' aria-expanded='true' aria-controls='\" + his.id + \"'>\" +\n                        his.Employed.value +\n                        \"</a>\" +\n                        \"</h4>\" +\n                        \"</div>\" +\n                        \"<div id='\" + his.id + \"' class=\\\"panel-collapse collapsing\\\" role=\\\"tabpanel\\\" aria-labelledby='headin\" + his.id + \"'>\" +\n                        \"<div class=\\\"panel-body\\\">\" +\n                        \"<p>Funcionário: \" + his.Employed.value + \" Matrícula: \" + his.Employed.id + \"</p>\" +\n                        \"<p>Data associação: \" + his.data_in + \" Data dissociação:\" + his.data_out + \" </p>\" +\n                        \"<p>Observação de associação:\" + his.obs_in + \"</p>\" +\n                        \"<p>Observação de dissociação:\" + his.obs_in + \"</p>\" +\n                        \"</div>\" +\n                        \"</div>\" +\n                        \"</div>\";\n                    History += row;\n                });\n                History += \"</div>\";\n            } else {\n                History = \"<p>Sem histórico de associações.</p>\";\n            }\n            connection += History;\n            if (item.state.length == 0) {\n                state =\n                    \"<button type=\\\"button\\\" class=\\\"close glyphicon glyphicon-pencil status-ben\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\"></span></button>\" +\n                    \"<p><b>Estado:</b>Sem definição</p>\" +\n                    \"<p><b>Descrição:</b>Sem definição</p>\";\n            } else {\n                state =\n                    \"<button type=\\\"button\\\" class=\\\"close glyphicon glyphicon-pencil status-ben\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\"></span></button>\" +\n                    \"<p><b>Estado:</b>\" + item.state[0].state + \"</p>\" +\n                    \"<p><b>Descrição:</b>\" + item.state[0].description + \"</p>\" +\n                    \"<p><b>Observação:</b>\" + item.state[0].desc + \"</p>\";\n            }\n            if (item.keys.length == 0) {\n                keys =\n                    \"<p>Nenhuma licença associada</p>\";\n            } else {\n                keys = \"<div class=\\\"panel-group\\\" id=\\\"accordion\\\" role=\\\"tablist\\\" aria-multiselectable=\\\"true\\\">\";\n                $.each(item.keys, function (l, key) {\n                    vencimento = \"Vitalício\";\n                    if (key.maturity_date != null) {\n                        vencimento = DateUsTODateBr(key.maturity_date);\n                    }\n                    keys +=\n                        \"<div class='panel panel-default'>\" +\n                        \"<div class='panel-heading' role='tab' id='headin\" + key.id + \"'>\" +\n                        \"<h4 class=\\\"panel-title\\\">\" +\n                        \"<a role='button' data-toggle='collapse'  href='#\" + key.id + \"' aria-expanded='true' aria-controls='\" + key.id + \"'>\"\n                        + key.name + \"/\" + key.model +\n                        \"</a>\" +\n                        \"</h4>\" +\n                        \"</div>\" +\n                        \"<div id='\" + key.id + \"' class=\\\"panel-collapse collapsing\\\" role=\\\"tabpanel\\\" aria-labelledby='headin\" + key.id + \"'>\" +\n                        \"<div class=\\\"panel-body\\\">\"\n                        + \"<span class='idkey' style='display: none' >\" + key.keyid + \"</span>\" +\n                        \"<b>Chave:</b>\" + key.key + \"  - <b>QTD</b> :\" + key.quantity + \"/<b>Em uso: </b>\" + key.in_use + \"<b> - Vencimento: </b>\" + vencimento\n                        + \" <button class='btn btn-xs remove-key' title='Dissociar o item da licença.' ><span class='glyphicon glyphicon-resize-full'></span> </button>\" +\n                        \"</div>\" +\n                        \"</div>\" +\n                        \"</div>\";\n                });\n                keys += \"</div>\";\n            }\n            if (item.HISTEMPRST.length == 0) {\n                Emprestimo = \"<p>Item não tem hístorico de emprestimo</p>\";\n            } else {\n                Emprestimo = \"<div class=\\\"panel-group\\\" id=\\\"accordion\\\" role=\\\"tablist\\\" aria-multiselectable=\\\"true\\\">\";\n                $.each(item.HISTEMPRST, function (i, his) {\n                    Emprestimo += \"<div class='panel panel-default'>\" +\n                        \"<div class='panel-heading' role='tab' id='headin\" + his.id + \"'>\" +\n                        \"<h4 class=\\\"panel-title\\\">\" +\n                        \"<a role='button' data-toggle='collapse'  href='#\" + his.id + \"' aria-expanded='true' aria-controls='headin\" + his.id + \"'>\"\n                        + his.employed.NUMCAD + \"/\" + his.employed.NOMFUN +\n                        \"</a>\" +\n                        \"</h4>\" +\n                        \"</div>\" +\n                        \"<div id='\" + his.id + \"' class=\\\"panel-collapse collapsing\\\" role=\\\"tabpanel\\\" aria-labelledby='headin\" + his.id + \"'>\" +\n                        \"<div class=\\\"panel-body\\\">\" +\n                        \"<p>Data emprestimo: \" + DateUsTODateBr(his.data_saida, true) + \"</p>\" +\n                        \"<p>Data data devolução: \" + DateUsTODateBr(his.data_saida, true) + \"</p>\" +\n                        \"</div>\" +\n                        \"</div>\" +\n                        \"</div>\";\n                });\n                Emprestimo += \"</div>\";\n            }\n\n            if (item.ASSOC) {\n                Assoc += \"<button class=\\\"btn btn-danger dissociar-colaborador\\\" type=\\\"button\\\">\" +\n                    \"<span class='glyphicon glyphicon-user'></span> Desassociar\" +\n                    \"</button>\";\n            } else if (item.EMPRST == 1) {\n                Assoc += \"<button class=\\\"btn btn-default associar-colaborador\\\" type=\\\"button\\\" disabled>\" +\n                    \"<span class='glyphicon glyphicon-user'></span> Associar\" +\n                    \"</button>\";\n            } else {\n                Assoc += \"<button class=\\\"btn btn-default associar-colaborador\\\" type=\\\"button\\\">\" +\n                    \"<span class='glyphicon glyphicon-user'></span> Associar\" +\n                    \"</button>\";\n            }\n\n            if (item.EMPRST == 0 && item.ASSOC == 0) {\n                Empres = \"<button class=\\\"btn btn-success emprestimo\\\" type=\\\"button\\\">\" +\n                    \"<span class='glyphicon glyphicon-transfer'></span> Emprestimo\" +\n                    \"</button>\";\n            } else if (item.ASSOC == 1) {\n                Empres = \"<button class=\\\"btn btn-success emprestimo\\\" type=\\\"button\\\" disabled>\" +\n                    \"<span class='glyphicon glyphicon-transfer'></span> Emprestimo\" +\n                    \"</button>\";\n            } else {\n                Empres = \"<button class=\\\"btn btn-warning devolucao\\\" type=\\\"button\\\">\" +\n                    \"<span class='glyphicon glyphicon-retweet'></span> Devolução\" +\n                    \"</button>\";\n\n            }\n            var row =\n                \"<div class=\\\"panel panel-default\\\">\" +\n                \"<div class=\\\"panel-heading cod-bem\\\">\" +\n                item.CODBEM +\n                \"</div>\" +\n                \"<div class='result-emp' style='display: none'>\" +\n                item.CODEMP +\n                \"</div>\" +\n                \"<div class=\\\"panel-body\\\">\" +\n                \"<p><b>Descrição</b>\" +\n                \"<p><b>Data Aquisição:</b> \" + item.DATAQI + \" </p>\" +\n                \"<p><b>Item:</b> \" + item.DESBEM + \" </p>\" +\n                \"<p><b>Descrição:</b> \" + item.DESESP + \" </p>\" +\n                \"<p><b>Empresa:</b> \" + item.NOMEMP + \" </p>\" +\n                \"<p><b>Centro Custo:</b> \" + item.CODCCU + \" - \" + item.DESCCU + \" </p>\" +\n                \"<hr>\"\n                + \"<p><b>Estado do bem</b>\"\n                + state\n                + \"<hr>\"\n                + \"<p><b>Associações</b>\"\n                + connection\n                + \"<hr>\"\n                + \"<p><b>Histórico de emprestimos</b>\"\n                + Emprestimo\n                + \"<hr>\"\n                + \"<p><b>Licenças associadas</b>\"\n                + keys +\n                \"</div>\" +\n                \"<div class='panel-footer'> \" +\n                \"<div class=\\\"btn-group\\\">\" +\n                \"<button class=\\\"btn btn-primary localizacoes\\\" type=\\\"button\\\">\" +\n                \"<span class='glyphicon glyphicon-map-marker'></span>Localizações\" +\n                \"</button>\" +\n                Assoc +\n                Empres +\n                \"</div>\" +\n                \"</div>\" +\n                \"</div>\";\n            $('#resultOfSearch').append(row);\n\n        });\n        $(\"#buttonSearch\").empty();\n        $(\"#buttonSearch\").append(\"<span class=\\\"glyphicon glyphicon-search\\\"></span> Pesquisar\");\n\n        Result = \"<p>Total:\" + data.total + \" exibindo:\" + data.per_page + \"</p>\";\n        $('.navegation').empty();\n        $('.navegation').append(Result);\n        $('.navegation').fadeIn();\n\n    } else {\n        $(\"#buttonSearch\").empty();\n        $(\"#buttonSearch\").append(\"<span class=\\\"glyphicon glyphicon-search\\\"></span> Pesquisar\");\n        var alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n            \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n            \"<strong>Atenção!</strong> Nenhum item encontrado!\" +\n            \"</div>\";\n        $('#resultOfSearch').append(alert);\n        $('.navegation').fadeOut();\n    }\n\n}\nfunction historyLocations(data, textStatus, jqXHR) {\n    $('#historicoLocalizacoes').empty();\n    $.each(data.Locations, function (i, item) {\n        var row = \"<div class=\\\"panel panel-default\\\">\" +\n            \"<div class=\\\"panel-body\\\">\" +\n            \"<p><b>Data Aquisição:</b> \" + item.DATLOC + \" </p>\" +\n            \"<p><b>Descrição:</b> \" + item.DESLOC + \" </p>\" +\n            \"</div>\" +\n            \"</div>\";\n        $('#historicoLocalizacoes').append(row);\n    });\n    $('#historyFinancialList').empty();\n    $.each(data.MovFinancial, function (i, item) {\n        var row = \"<div class=\\\"panel panel-default\\\">\" +\n            \"<div class=\\\"panel-body\\\">\" +\n            \"<p><b>Data Movimentação:</b> \" + item.DATMOV + \" </p>\" +\n            \"<p><b>Descrição:</b> \" + item.DESTNS + \" </p>\" +\n            \"<p><b>Centro Custo:</b> \" + item.CODCCU + \" </p>\" +\n            \"</div>\" +\n            \"</div>\";\n        if (item.CODTNS == 90804) {\n            var alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                \"<strong>Atenção!</strong> Esse item foi vendido!.\" +\n                \"</div>\";\n            $('#search').after(alert);\n        }\n        if (item.CODTNS != 90815) {\n            $('#historyFinancialList').append(row);\n        }\n    });\n}\nfunction Emprestimo(url, data) {\n    $('#loading').modal('show');\n    $.ajax({\n        url: url,\n        data: data,\n        type: 'post',\n        dataType: 'json',\n        success: function (response) {\n            var alert = \"\";\n            if (response.erro == 1) {\n                alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg\n                \"</div>\";\n            } else if (response.erro == 0) {\n                $('.emprestimo-option').addClass('display-emprestismo');\n                $('#resultOfSearch').removeClass('col-md-4');\n                $('#resultOfSearch').addClass('col-md-12');\n                alert = \"<div class=\\\"alert alert-success alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg\n                \"</div>\";\n\n            }\n            url = url.replace('emprestimo', 'search');\n            updatesearch(url, {pat: data.codbem, emp: data.codbememp});\n            $('#search').after(alert);\n        },\n        complete: function () {\n            $('#loading').modal('hide');\n        }\n    }).fail(ErroConnect);\n}\nfunction Devolucao(url, data) {\n    $('#loading').modal('show');\n    $.ajax({\n        url: url,\n        type: 'post',\n        data: data,\n        dataType: 'json',\n        success: function (response) {\n            var alert = \"\";\n            if (response.error == 1) {\n                alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            } else if (response.error == 0) {\n                $('.devolucao-option').addClass('display-emprestismo');\n                $('#resultOfSearch').removeClass('col-md-4');\n                $('#resultOfSearch').addClass('col-md-12');\n                alert = \"<div class=\\\"alert alert-success alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            }\n            url = url.replace('devolucao', 'search');\n            updatesearch(url, {pat: data.codbem, emp: data.codbememp});\n            $('#search').after(alert);\n        }, complete: function () {\n            $('#loading').modal('hide');\n        }\n    }).fail(ErroConnect);\n}\nfunction DevolucaoDados(url, data) {\n\n    $.ajax({\n        url: url + \"/\" + data.codbem + \"/\" + data.codbememp,\n        type: 'get',\n        data: data,\n        dataType: 'json',\n        success: function (response) {\n            $('.info-devolucao').remove();\n            var linha = \"<div class='panel panel-default info-devolucao'><div class='panel-body'>\" +\n                \"<p><b>Data empréstimo: </b>\" + response[0].data_out + \"</p>\" +\n                \"<p><b>Colaborador: </b>\" + response[0].colaborador.value + \"</p>\" +\n                \"<p><b>Situação do colaborador: </b>\" + response[0].colaborador.DESSIT + \"</p>\" +\n                \"<p><b>Obs saída: </b>\" + (response[0].obs_saida == \"\" ? \"Sem observação\" : response[0].obs_saida) + \"</p>\" +\n                \"</div></div>\";\n            $('#devolucao-form').before(linha);\n        }\n    }).fail(ErroConnect);\n}\nfunction Associar(url, data) {\n    $('#loading').modal('show');\n    $.ajax({\n        url: url,\n        type: 'post',\n        data: data,\n        success: function (response) {\n            var alert = \"\";\n            if (response.error == 1) {\n                alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            } else if (response.error == 0) {\n                $('.associacao-option').addClass('display-emprestismo');\n                $('#resultOfSearch').removeClass('col-md-4');\n                $('#resultOfSearch').addClass('col-md-12');\n                alert = \"<div class=\\\"alert alert-success alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            }\n            url = url.replace('associar', 'search');\n            updatesearch(url, {pat: data.codbem, emp: data.codbememp});\n            $('#search').after(alert);\n        }, complete: function () {\n            $('#loading').modal('hide');\n        }\n    }).fail(ErroConnect);\n}\nfunction Dissociar(url, data) {\n    $('#loading').modal('show');\n    $.ajax({\n        url: url,\n        type: 'post',\n        data: data,\n        dataType: 'json',\n        success: function (response) {\n            var alert = \"\";\n            if (response.error == 1) {\n                alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            } else if (response.error == 0) {\n                alert = \"<div class=\\\"alert alert-success alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            }\n            url = url.replace('dissociar', 'search');\n            updatesearch(url, {pat: data.codbem, emp: data.codbememp});\n            $('#search').after(alert);\n            $('#modal-desassociar').modal('hide');\n        }, complete: function () {\n            $('#loading').modal('hide');\n        }\n    }).fail(ErroConnect);\n}\nfunction ErroConnect(Error) {\n    if (Error.status == 401) {\n        location.reload();\n    }\n}\nfunction InsertState(url, data, callback) {\n    $.ajax({\n        url: url,\n        type: 'post',\n        data: data,\n        dataType: 'json',\n        success: function (response) {\n            if (response.error == 1) {\n                alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            } else if (response.error == 0) {\n                alert = \"<div class=\\\"alert alert-success alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg +\n                    \"</div>\";\n            }\n            url = url.replace('state', 'search');\n            updatesearch(url, {pat: data.codbem, emp: data.codbememp});\n            $('#search').after(alert);\n        }\n    }).fail(ErroConnect).always(callback);\n}\nfunction GetState(url, data, callback) {\n    $.ajax({\n        url: url,\n        type: 'get',\n        data: data,\n        dataType: 'json',\n        success: function (response) {\n            if (response.length > 0) {\n                $(\"#form-state select\").val(response[0].state_id);\n                $(\"#form-state textarea\").val(response[0].description);\n                $('#upddated_at').text(response[0].updated);\n            } else {\n                $(\"#form-state\")[0].reset();\n                $('#upddated_at').text(\"Não existe atualizações\");\n            }\n\n        }\n    }).fail(ErroConnect).always(callback);\n}\nfunction RemoveKey(url, data, callback) {\n    $.ajax({\n        url: url,\n        type: 'delete',\n        data: data,\n        dataType: 'json',\n        success: function (response) {\n            var alert = \"\";\n            if (response.error == 1) {\n                alert = \"<div class=\\\"alert alert-danger alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg\n                \"</div>\";\n            } else if (response.error == 0) {\n                $('.emprestimo-option').addClass('display-emprestismo');\n                $('#resultOfSearch').removeClass('col-md-4');\n                $('#resultOfSearch').addClass('col-md-12');\n                alert = \"<div class=\\\"alert alert-success alert-dismissible search\\\" role=\\\"alert\\\">\" +\n                    \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\" +\n                    \"<strong>Atenção!</strong> \" + response.msg\n                \"</div>\";\n            }\n            url = url.replace('licencas', 'ativos');\n            url = url.replace('produto', 'search');\n            url = url.replace('delete', '');\n            updatesearch(url, {pat: data.pat, emp: data.emp});\n            $('#search').after(alert);\n        }\n    }).fail(ErroConnect).always(callback);\n    ;\n}\nfunction updatesearch(url, data) {\n    $.ajax({\n        url: url,\n        data: data,\n        type: 'get',\n        dataType: 'json'\n    }).done(handleData)\n        .fail(ErroConnect);\n}\nfunction DateUsTODateBr(date, time) {\n    var d = new Date(date);\n    var hora = time == true ? d.getHours() + \":\" + (d.getMinutes() <= 9? '0'+d.getMinutes():d.getMinutes()) : \"\";\n    return d.toLocaleDateString() + \" \" + hora;\n}\n\nfunction CreateFilterPat(number) {\n    CheckFilter = $('#filter').find('#filter-pat');\n    if (CheckFilter.length >= 1) {\n        $('#filter #filter-pat').remove();\n    }\n    if (number != '') {\n        var row = \"<div id=\\\"filter-pat\\\" class=\\\"alert alert-info\\\" role=\\\"alert\\\">\" +\n            \"<b>Patrimônio</b>: <a href=\\\"#\\\" class=\\\"alert-link\\\">\" + number + \"</a>\" +\n            \"<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\">\" +\n            \"<span aria-hidden=\\\"true\\\">&times;</span>\" +\n            \"</button>\" +\n            \"<span id='filter-pat-num' style='display: none'>\" + number + \"</span>\" +\n            \"</div>\";\n        $('#filter').append(row);\n    } else {\n        $('#filter #filter-pat').remove();\n\n    }\n}\nfunction PreLoad(from, atualaryURi) {\n    atualaryURi = atualaryURi.split('#');\n    if (atualaryURi.length > 1) {\n        CreateFilterPat(atualaryURi[1]);\n        data = {\n            qtd: $('#displayNumber').val(),\n            pat: atualaryURi[1],\n            ccu: $('#filter-costcenter-num').text(),\n            employed: {\n                usr: $('#filter-nameemployed-usr').text(),\n                emp: $('#filter-nameemployed-emp').text(),\n                tip: $('#filter-nameemployed-tip').text()\n            }\n        };\n        $.ajax({\n            url: from,\n            data: data,\n            type: 'get',\n            dataType: 'json'\n        }).done(handleData)\n            .fail(ErroConnect);\n    }\n}\nfunction getTermos(url) {\n    item = document.getElementsByClassName('cod-bem');\n    codbememp = document.getElementsByClassName('result-emp');\n    numemp = document.getElementsByClassName('assoc-numemp');\n    sitafa = document.getElementsByClassName('assoc-sitafa');\n    tipcol = document.getElementsByClassName('assoc-tipcol');\n    numcol = document.getElementsByClassName('assoc-id');\n    bem = {\n        coditem: item[0].innerHTML,\n        codemp: codbememp[0].innerHTML\n    };\n    employed = {\n        numemp: numemp[0].innerHTML,\n        sitafa: sitafa[0].innerHTML,\n        tipcol: tipcol[0].innerHTML,\n        numcol: numcol[0].innerHTML\n    };\n    $.ajax({\n        url: url,\n        type: 'get',\n        data: {bem, employed},\n        datType: 'json',\n        success: function (data) {\n            $('#list-termos').empty();\n            if (data.error==0) {\n                $.each(data.data, function (i, item) {\n                    enviado = 'Não enviado';\n                    if(item.notification.length >0){\n                        enviado = 'Enviado dia ' + DateUsTODateBr(item.notification[0].created_at,true);\n                    }\n                    devolvido = item.signtermo != 0 ? 'Recebido' : 'Não recebido';\n                    buttonDevolvidoDisabled = item.signtermo != 0 ? 'disabled' : '';\n                    buttonDevolvido = item.signtermo != 0 ? ' <a title=\"download termo assinado\" target=\"_blank\" href=\"/termos/download/'+item.id+'-'+item.tipotermo_id+'\" class=\"btn btn-success btn-sm\"><span class=\"glyphicon glyphicon-cloud-download\"></span></a>' : '';\n                    row = \"\";\n                    row += '<div class=\"panel panel-default\" style=\"margin-bottom: 5px\">'\n                        + '<div class=\"panel-body\">'\n                        + '<span class=\"id-termo\" style=\"display: none\">'+item.id+'</span>'\n                        + item.tipoTermo.name + ' /  ' + enviado + ',' + devolvido\n                        + '<div class=\"row\">'\n                        + '<div class=\"col-lg-12\">'\n                        + '<button title=\"download de termo gerado\" class=\"btn btn-default notification-termo btn-sm\" '+buttonDevolvidoDisabled+' ><span class=\"glyphicon glyphicon-bullhorn\"> <span class=\"badge\">'+item.notificationQtd+'</span></span></button> '\n                        + '<button title=\"upload de termo assinado\" class=\"btn btn-default upload-termo btn-sm\"><span class=\"glyphicon glyphicon-cloud-upload\"></span></button> '\n                        + '<a target=\"_blank\" href=\"/termos/download/'+item.id+'\" class=\"btn btn-default btn-sm\"><span class=\"glyphicon glyphicon-cloud-download\"></span></a> '\n                        + buttonDevolvido\n                        + '</div>'\n                        + '</div>'\n                        + '</div>'\n                        + '</div>';\n                    $('#list-termos').append(row);\n                });\n            }else{\n                $('#list-termos').append(\"<p>\"+data.msg+\"</p>\");\n            }\n        }\n    });\n    //console.log(bem);\n    //console.log(employed);\n}\n\n\nfunction notificationTermo(termo,url) {\n    $.ajax({\n        url: url+'/'+termo,\n        type: 'get',\n        datType: 'json',\n        success: function (data) {\n           if(data.error){\n               swal(\n                   'Oops...',\n                   data.msg\n                   ,\n                   'error'\n               )\n           }else{\n               swal(\n                   'Good job!',\n                   data.msg,\n                   'success'\n               );\n               getTermos('api/ativos/termos');\n           }\n\n        }\n    });\n}\n\nangular.module('ativos', ['ngMessages']);\nangular.module('ativos').controller('termo', function ($http, $scope) {\n    $scope.gerarTermo = function (termo) {\n\n        item = angular.element(document.getElementsByClassName('cod-bem'));\n        codbememp = angular.element(document.getElementsByClassName('result-emp'));\n        numemp = angular.element(document.getElementsByClassName('assoc-numemp'));\n        sitafa = angular.element(document.getElementsByClassName('assoc-sitafa'));\n        tipcol = angular.element(document.getElementsByClassName('assoc-tipcol'));\n        numcol = angular.element(document.getElementsByClassName('assoc-id'));\n        bem = {\n            coditem: item[0].innerHTML,\n            codemp: codbememp[0].innerHTML\n        };\n        employed = {\n            numemp: numemp[0].innerHTML,\n            sitafa: sitafa[0].innerHTML,\n            tipcol: tipcol[0].innerHTML,\n            numcol: numcol[0].innerHTML\n        };\n        if (!$scope.novoTermo.tipo.$error.required) {\n            $http.post('ativos/termo/novo', [termo, bem, employed]).then(function successCallback(response) {\n                if(response.data.error){\n                    angular.element(\n                        swal(\n                            'Oops...',\n                            response.data.msg\n                            ,\n                            'error'\n                        )\n                    );\n                }else{\n                    angular.element(\n                        swal(\n                            'Good job!',\n                            response.data.msg,\n                            'success'\n                        )\n                    );\n                    getTermos('api/ativos/termos');\n\n                }\n            });\n        }\n    }\n});\nangular.module('ativos').controller('dataSearch', function ($http, $scope) {\n\n});\n//# sourceMappingURL=ativos.js.map\n"]}